- id: wordpress-cleanup
  phase: post
  trigger:
    dom:
      any: [".wp-block-post-content", ".wp-block-group"]
  remove:
    - ".sharedaddy"
    - ".jp-relatedposts"
    - "#comments"
    - ".comment-respond"

- id: wordpress-jetpack-cleanup
  phase: post
  trigger:
    dom:
      any: [".jp-relatedposts", ".sharedaddy"]
  remove:
    - ".jp-relatedposts"
    - ".sharedaddy"
    - ".jetpack-related-posts"

- id: ghost-cleanup
  phase: post
  trigger:
    dom:
      any: [".gh-content"]
  remove:
    - ".gh-post-upgrade-cta"
    - ".gh-post-subscribe-cta"
    - ".gh-post-tags"

- id: squarespace-cleanup
  phase: post
  trigger:
    dom:
      any: [".sqs-block", ".sqs-block-content"]
  remove:
    - ".sqs-announcement-bar"
    - ".sqs-cookie-banner"
    - ".sqs-block-newsletter"

- id: substack-cleanup
  phase: post
  trigger:
    host:
      ends_with: "substack.com"
  remove:
    - ".post-footer"
    - ".subscription-widget-wrap"
    - ".comments"

- id: substack-include-images
  phase: pre
  trigger:
    host:
      ends_with: "substack.com"
  include:
    - ".post-content img"
    - ".available-content img"
    - "figure img"
    - 'figure[data-component-name="ImageGallery"]'

- id: substack-include-images-dom
  phase: pre
  trigger:
    dom:
      any:
        - '[data-component-name="Image2ToDOM"]'
        - '[data-component-name="ImageGallery"]'
        - ".image-gallery-embed"
        - '[data-attrs*="gallery"]'
  include:
    - ".post-content img"
    - ".available-content img"
    - "figure img"
    - 'figure[data-component-name="ImageGallery"]'

- id: substack-article-override
  phase: pre
  priority: 80
  trigger:
    dom:
      any:
        - '[data-component-name="Image2ToDOM"]'
        - '[data-component-name="ImageGallery"]'
        - ".image-gallery-embed"
        - '[data-attrs*="gallery"]'
  selector_overrides:
    article: ".available-content, .post-content"

- id: darioamodei-article-override
  phase: pre
  priority: 80
  trigger:
    host:
      ends_with: "darioamodei.com"
  selector_overrides:
    article: "article"

- id: github-cleanup
  phase: post
  trigger:
    host:
      ends_with: "github.com"
  remove:
    - ".js-header-wrapper"
    - ".file-header"
    - ".js-footer"

- id: github-article-override
  phase: pre
  priority: 80
  trigger:
    host:
      ends_with: "github.com"
  selector_overrides:
    article: ".markdown-body"

- id: github-include-images
  phase: pre
  trigger:
    host:
      ends_with: "github.com"
  include:
    - "article.markdown-body img"
    - ".markdown-body img"

- id: beehiiv-include-images
  phase: pre
  trigger:
    dom:
      any: [".rendered-post"]
  include:
    - ".rendered-post img"
    - ".rendered-post figure img"

- id: elementor-include-images
  phase: pre
  trigger:
    dom:
      any: [".elementor-widget-container"]
  include:
    - ".elementor-widget-container img"

- id: stackoverflow-cleanup
  phase: post
  trigger:
    host:
      ends_with: "stackoverflow.com"
  remove:
    - "#sidebar"
    - ".s-topbar"
    - "#hot-network-questions"

- id: notion-cleanup
  phase: post
  trigger:
    host:
      ends_with: "notion.site"
  remove:
    - ".notion-topbar"
    - ".notion-collection-view-select"
    - ".notion-navbar"

- id: intercom-cleanup
  phase: post
  trigger:
    dom:
      any: [".intercom-interblocks"]
  remove:
    - ".intercom-article-footer"
    - ".intercom-interblocks-share"
    - ".intercom-reaction"

- id: medium-draftjs-cleanup
  phase: post
  trigger:
    dom:
      any: [".public-DraftEditor-content"]
  remove:
    - ".metabar"
    - ".pw-responses"

- id: swiper-cleanup
  phase: post
  trigger:
    dom:
      any: [".swiper-slide-duplicate"]
  remove:
    - ".swiper-slide-duplicate"

# Mintlify Documentation Platform
# Detection: mintcdn.com assets, .mintlify.app subdomain, or generator meta tag
- id: mintlify-detect-cdn
  phase: pre
  priority: 80
  trigger:
    dom:
      any:
        - 'img[src*="mintcdn.com"]'
        - 'link[href*="mintcdn.com"]'
        - 'meta[name="generator"][content*="Mintlify"]'
  selector_overrides:
    article: "article, main, [role='main']"
  remove:
    # Navigation
    - "nav"
    - "header"
    - "footer"
    - "aside"
    # Sidebar navigation (left)
    - "[class*='sidebar']"
    - "[class*='Sidebar']"
    - "[id*='sidebar']"
    # Table of contents (right)
    - "[class*='toc']"
    - "[class*='TableOfContents']"
    - "[class*='on-this-page']"
    # Breadcrumbs
    - "[class*='breadcrumb']"
    - "[class*='Breadcrumb']"
    # Pagination
    - "[class*='pagination']"
    - "[class*='Pagination']"
    - "[class*='prev-next']"
    - "[class*='PrevNext']"
    # Search
    - "[class*='search']"
    - "[class*='Search']"
    - "[id*='search']"
    # Feedback widgets
    - "[class*='feedback']"
    - "[class*='Feedback']"
    - "[class*='helpful']"
    - "[class*='Helpful']"
    # Theme toggle
    - "[class*='theme-toggle']"
    - "[class*='ThemeToggle']"
    - "[class*='dark-mode']"
    - "[class*='DarkMode']"

- id: mintlify-detect-subdomain
  phase: pre
  priority: 80
  trigger:
    host:
      ends_with: ".mintlify.app"
  selector_overrides:
    article: "article, main, [role='main']"
  remove:
    - "nav"
    - "header"
    - "footer"
    - "aside"
    - "[class*='sidebar']"
    - "[class*='Sidebar']"
    - "[class*='toc']"
    - "[class*='TableOfContents']"
    - "[class*='breadcrumb']"
    - "[class*='Breadcrumb']"
    - "[class*='pagination']"
    - "[class*='Pagination']"
    - "[class*='search']"
    - "[class*='Search']"
    - "[class*='feedback']"
    - "[class*='Feedback']"

- id: mintlify-cleanup
  phase: post
  trigger:
    dom:
      any:
        - 'img[src*="mintcdn.com"]'
        - 'meta[name="generator"][content*="Mintlify"]'
  remove:
    # Any remaining chrome
    - "[class*='edit-page']"
    - "[class*='EditPage']"
    - "[class*='page-navigation']"
    - "[class*='PageNavigation']"
    - "[class*='copy-button']"
    - "[class*='CopyButton']"
    # Social/share
    - "[class*='share']"
    - "[class*='Share']"
    - "[class*='social']"
    - "[class*='Social']"
    # Newsletter/CTA
    - "[class*='newsletter']"
    - "[class*='Newsletter']"
    - "[class*='subscribe']"
    - "[class*='Subscribe']"
    - "[class*='cta']"
    - "[class*='Cta']"

- id: mintlify-include-images
  phase: pre
  trigger:
    dom:
      any:
        - 'img[src*="mintcdn.com"]'
        - 'meta[name="generator"][content*="Mintlify"]'
  include:
    - "article img"
    - "main img"
    - "[role='main'] img"
    - "figure img"
    - 'img[src*="mintcdn.com"]'
